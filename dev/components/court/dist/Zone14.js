define("court/court/1.0.0/Zone14",["./ShotchartUi","d3","./ZoneHelper","./color_helper","./ShotFilterCrossFilter","./ShotFilter"],function(a,b,c){var d=a("./ShotchartUi"),e=a("./ZoneHelper");a("./color_helper");var f=a("./ShotFilterCrossFilter"),g=a("d3"),h=function(a,b,c){d.call(this),this.courtobj=a,this.court=this.courtobj.container,this.data=b,this.selector=".gz14",this.helper=e,this.color_helper=c,this.filterobj=new f(b)};h.prototype=new d,h.prototype.constructor=h,h.prototype.draw=function(){this.court;var a={nba:[{shotzone:1,d:"M0,0 L30,0 L30,169 L0,169 Z",labels:{offense:{x:0,y:80,x2:0,y2:90},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:2,d:"M30,169 A285,285 0 0,0 204,345 L204,564 L0,564 L0,169 Z",labels:{offense:{x:110,y:366,x2:110,y2:386},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:3,d:"M204,345 A285,285 0 0,0 396,345 L396,564 L204,564 Z",labels:{offense:{x:280,y:420,x2:280,y2:440},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:4,d:"M396,345 A285,285 0 0,0 570,169 L600,169 L600,564 L396,564 Z",labels:{offense:{x:440,y:366,x2:420,y2:386},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:5,d:"M570,0, L600,0 L600,169 L570,169 Z",labels:{offense:{x:550,y:80,x2:550,y2:90},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:6,d:"M31,0 204,0 204,114 L31,114 Z",labels:{offense:{x:90,y:60,x2:90,y2:80},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:7,d:"M30,169 A285,285 0 0,0 204,345 L204,114 L31,114 Z",labels:{offense:{x:90,y:170,x2:90,y2:190},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:8,d:"M204,345 A285,285 0 0,0 396,345 L396,228 L204,228 Z",labels:{offense:{x:280,y:280,x2:280,y2:300},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:9,d:"M396,345 A285,285 0 0,0 570,169 L570,114 L396,114 Z",labels:{offense:{x:450,y:170,x2:450,y2:190},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:10,d:"M396,0 L570,0 L570,114 L396,114 Z",labels:{offense:{x:450,y:60,x2:450,y2:80},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:11,d:"M204,114 L300,114 L300,228 L204,228 Z",labels:{offense:{x:230,y:150,x2:230,y2:170},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:12,d:"M300,114 L396,114 L396,228 L300,228 Z",labels:{offense:{x:320,y:150,x2:320,y2:170},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:13,d:"M204,0 L300,0 L300,114 L204,114 Z",labels:{offense:{x:230,y:60,x2:230,y2:80},defense:{x:0,y:70,x2:0,y2:90}}},{shotzone:14,d:"M300,0 L396,0 L396,114 L300,114 Z",labels:{offense:{x:320,y:60,x2:320,y2:80},defense:{x:0,y:70,x2:0,y2:90}}}]},b=a[this.courtobj.court_type],c=this.court.selectAll(".gz14").data(b).enter().append("g").attr("class","gz14 gzone");c.each(function(a,b){var c=g.select(this);c.append("path").attr("class","shotzone_14 shotzone").attr("d",a.d).datum({shotzone:b+1,value:0}),c.append("text").text("zone").attr({"class":"shotzone_14_label zone_label",x:a.labels.offense.x,y:a.labels.offense.y}),c.append("text").text(" ").attr({"class":"shotzone_14_label_sec zone_label",x:a.labels.offense.x2,y:a.labels.offense.y2})}),this.court.selectAll(".gz14").attr("opacity",0),this.court.selectAll(".shotzone_14").attr({opacity:.7,"stroke-width":1,stroke:"gray",fill:"gray"}),this.court.selectAll(".shotzone_14_label").attr({"font-size":20,"font-weight":"bolder","font-family":"Oswald,Helvetica",fill:"black"}),this.court.selectAll(".shotzone_14_label_sec").attr({"font-size":12,"font-family":"Helvetica"})},h.prototype.updateData=function(){var a=this.filterobj.format_data(this.data,this.helper);this.helper._appendDataToZoneAndLabels(this.court,a,"14");var b=this;return setTimeout(function(){b.repositionLabels(b.court,b.selector,".shotzone_14",0)},500),this},h.prototype.label=function(a){var b={},c=this.helper._countTotalShots(this.filterobj.get_shots(this.data));b.shot={label:function(a){return 0==c?"N/A":Math.floor(1e3*a.value/c)/10+"%"},label_sec:function(a){return a.value}},b.fg={label:function(a){return 0==a.value?"N/A":Math.round(1e3*a.made/a.value)/10+"%"},label_sec:function(a){return a.made+"-"+a.value}},b.pps={label:function(a){return 0==a.value?"N/A":Math.round(100*a.points/a.value)/100},label_sec:function(a){return a.made+"-"+a.value}},this.court.selectAll(".shotzone_14_label").transition().duration(1e3).text(function(c){return b[a].label(c)}),this.court.selectAll(".shotzone_14_label_sec").transition().duration(1e3).text(function(c){return b[a].label_sec(c)})},h.prototype.fill=function(a,b){var c=this.helper._countTotalShots(this.filterobj.get_shots(this.data)),d=this.color_helper;this.court.selectAll(".shotzone_14").transition().duration(b).attr("fill",function(b){var e=b.id||parseInt(b.shotzone),f=d.getFillFunction(e,a,c);return f(b)})},c.exports=h}),define("court/court/1.0.0/ShotchartUi",["d3"],function(a,b,c){var d=a("d3"),e=function(a,b){this.courtobj=a,this.court={},this.selector="",this.data=b};e.prototype={draw:function(){},show:function(a){return a="undefined"!=typeof a?a:1e3,this.court.selectAll(this.selector).transition().duration(a).attr("opacity",1),this},hide:function(a){return a="undefined"!=typeof a?a:1e3,this.court.selectAll(this.selector).transition().duration(a).attr("opacity",0),this},filter:function(){},change_baseline:function(){},summarize_stats:function(){},updateData:function(){return!1},label:function(){},fill:function(){},hideLabel:function(){this.court.selectAll(".zone_label").attr("opacity",0)},showLabel:function(){this.court.selectAll(".zone_label").attr("opacity",1)},flipLabel:function(a,b,c){a.selectAll(b).each(function(){var a=d.select(this),b=a.selectAll(c+"_label"),e=b[0][0].getBBox(),f=a.selectAll(c+"_label_sec"),g=f[0][0].getBBox();e.x+e.width/2,e.y+e.height/2,g.x+g.width/2,g.y+g.height/2,b.transition().duration(500).attr("transform","translate("+label_translate+",0)"),f.transition().duration(500).attr("transform","translate("+label2_translate+",0)")})},repositionLabels:function(a,b,c,e){e="undefined"==typeof e?500:e;var f=this;a.selectAll(b).each(function(){var a=d.select(this),b=a.selectAll(c),g=b[0][0].getBBox();label=a.selectAll(c+"_label"),label_bbox=label[0][0].getBBox(),label2=a.selectAll(c+"_label_sec"),label2_bbox=label2[0][0].getBBox();var h=g.x+g.width/2-label_bbox.x-label_bbox.width/2,i=g.x+g.width/2-label2_bbox.x-label2_bbox.width/2,j=label_bbox.x+label_bbox.width/2,k=label_bbox.y+label_bbox.height/2,l=label2_bbox.x+label2_bbox.width/2,m=label2_bbox.y+label2_bbox.height/2,n="",o="";"defense"==f.courtobj.orientation&&(n="rotate(180 "+j+" "+k+")",o="rotate(180 "+l+" "+m+")"),label.transition().duration(e).attr("transform","translate("+h+",0) "+n),label2.transition().duration(e).attr("transform","translate("+i+",0) "+o)})}},c.exports=e}),define("court/court/1.0.0/ZoneHelper",[],function(a,b,c){var d={_fillMissingZones:function(a){for(idx=1;14>=idx;idx++)(a.length<idx||a[idx-1].key!=idx)&&a.splice(idx-1,0,{key:idx,value:0,made:0,points:0,id:"zone14_"+idx});return a},_appendMadeShots:function(a,b){for(idx in b)zone=a[b[idx].key-1],zone.made=b[idx].value,zone.id="zone14_"+(parseInt(idx)+1),zone.key>0&&zone.key<=5?(zone.pps=Math.round(100*3*zone.made/zone.value)/100,zone.points=3*zone.made):zone.key>5&&(zone.pps=Math.round(100*2*zone.made/zone.value)/100,zone.points=2*zone.made);return a},_countTotalShots:function(a){total=0;for(idx in a)zone=a[idx],total+=zone.value;return total},_appendDataToZoneAndLabels:function(a,b,c){zone_class=".shotzone_"+c,a.selectAll(zone_class+"_label").data(b),a.selectAll(zone_class+"_label_sec").data(b),a.selectAll(zone_class).data(b)},_convertCrossFilterDataToArray:function(a){var b=a.group(),c=a.group();c.reduceSum(function(a){return a.shm});var d=b.all(),e=c.all(),f=this._fillMissingZones(d),f=this._appendMadeShots(d,e);return f}};b=c.exports=d}),define("court/court/1.0.0/color_helper",[],function(){}),define("court/court/1.0.0/ShotFilterCrossFilter",["court/court/1.0.0/ShotFilter"],function(a,b,c){a("court/court/1.0.0/ShotFilter");var d=function(a){this.data=a};d.prototype.constructor=d,d.prototype.format_data=function(a,b){var c=a.group(),d=a.group();d.reduceSum(function(a){return a.shm});var e=c.all(),f=d.all(),g=b._fillMissingZones(e),g=b._appendMadeShots(e,f);return g},d.prototype.get_shots=function(a){return a.group().all()},b=c.exports=d}),define("court/court/1.0.0/ShotFilter",[],function(a,b,c){var d=function(a){this.data=a};d.prototype={filter:function(){}},b=c.exports=d});
