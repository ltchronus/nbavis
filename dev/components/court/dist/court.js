define("court/court/1.0.0/court",["./ShotchartUi","d3"],function(a,b,c){a("./ShotchartUi");var d=a("d3"),e="#ccc";param_shot_location={x:function(a){return 250+parseInt(a.x)},y:function(a){return parseInt(a.y)}};var f={};f.court=function(a,b){function c(a){f.selectAll(".inputted").remove();var b=f.selectAll(".inputted").data(a);b.exit().remove(),b.enter().append("circle").attr("class","inputted").attr({r:4,cx:function(a){return parseInt(a.x)+250},cy:function(a){return a.y}}).attr({fill:"none",stroke:"red","stroke-width":2}),b.transition().duration(400).attr("r",10)}var f={},g={};this.court_type="nba";var h=function(a){return"undefined"!=typeof a&&f.attr("width",a),f.attr("width")},i=function(a){return"undefined"!=typeof a&&f.attr("height",a),f.attr("height")};this.container={},this.draw=function(c,h){this.config={div_container:"#chart",svg:{width:1145,height:617,"class":"courts",id:c,viewBox:"0 0 1130 660"},court_elements:{background:{x:0,y:0,width:1128,height:600,fill:"#e9b875"},outline:{width:1128,height:600,fill:"none",stroke:"#777","stroke-width":1,"class":"halfcourt"},label:{x:20,y:450,"class":"court_label",fill:"#999"},markings:{threeptstr_left:{type:"path",attrs:{d:"M0 30 L169,30 A285 285 0 0 1 169 570 L0 570Z",stroke:e,fill:"green","stroke-width":4}},threeptstr_right:{type:"path",attrs:{d:"M1128 30 L959,30A285 285 0 0 0 959 570L1128 570Z ",stroke:e,fill:"green","stroke-width":4}},restricted_left:{type:"rect",attrs:{x:0,y:204,width:226,height:192,stroke:e,fill:"rgba(255,0,0,.7)","stroke-width":4}},restricted_right:{type:"rect",attrs:{x:900,y:204,width:226,height:192,stroke:e,fill:"rgba(255,0,0,.7)","stroke-width":4}},paintleft:{type:"rect",attrs:{x:0,y:228,width:226,height:144,stroke:e,fill:"red","stroke-width":4}},paintright:{type:"rect",attrs:{x:900,y:228,width:226,height:144,stroke:e,fill:"red","stroke-width":4}},hoopleft:{type:"circle",attrs:{cx:63,cy:300,r:9,stroke:e,fill:"white","stroke-width":3}},hoopright:{type:"circle",attrs:{cx:1064,cy:300,r:9,stroke:e,fill:"white","stroke-width":3}},paint_circle_left:{type:"circle",attrs:{cx:226,cy:300,r:72,stroke:e,fill:"none","stroke-width":4}},paint_circle_right:{type:"circle",attrs:{cx:900,cy:300,r:72,stroke:e,fill:"none","stroke-width":4}},halfcourtline:{type:"path",attrs:{d:"M564 0L564 600",stroke:e,fill:"none","stroke-width":4}},center_circle:{type:"circle",attrs:{cx:564,cy:300,r:72,stroke:e,fill:"green","stroke-width":4}},backboard_left:{type:"rect",attrs:{x:40,y:264,width:5,height:72}},backboard_right:{type:"rect",attrs:{x:1088,y:264,width:5,height:72}}}}};var i="undefined"==typeof a?this.config.div_container:a;"undefined"==typeof svg_selector?this.config.div_container:a;var j="undefined"==typeof b?d.select(i).append("svg").attr(this.config.svg):b,k=j.append("g").attr("class","court_container").attr("transform","translate(15,15)");k.select("svg.courts"),k.append("text").attr(this.config.court_elements.label).attr("class","court-label").text(h),k.append("rect").attr(this.config.court_elements.background);for(var l in this.config.court_elements.markings){var m=this.config.court_elements.markings[l];k.append(m.type).attr(m.attrs)}return k.append("rect").attr(this.config.court_elements.outline),f=j,g=i,this.container=k,k},this.width=function(a){return h(a)},this.height=function(a){return i(a)},this.orientation="offense",this.setOrientation=function(a){this.orientation=a,this.flip()},this.getOrientation=function(){return this.orientation},this.setCourtLabel=function(a){f.select(".court-label").text(a)},this.flip=function(){return f.select(".court_container").attr("transform","translate(15, 15) rotate(180 250 235)")};var j=function(){var a=$(g),b=a.width()-10;600>b&&(h(b),i(Math.round(470*b/500)))};this.setResizeListener=function(){$(window).on("resize",j),$(window).on("load",j)},this.drawCircles=function(a){c(a)},this.addInputListener=function(a){f.on("click",function(){coord=d.mouse(this),a({x:Math.round(coord[0]-250),y:Math.round(coord[1])})})}},c.exports=f}),define("court/court/1.0.0/ShotchartUi",[],function(){var a=function(a,b){this.courtobj=a,this.court={},this.selector="",this.data=b};a.prototype={draw:function(){},show:function(a){return a="undefined"!=typeof a?a:1e3,this.court.selectAll(this.selector).transition().duration(a).attr("opacity",1),this},hide:function(a){return a="undefined"!=typeof a?a:1e3,this.court.selectAll(this.selector).transition().duration(a).attr("opacity",0),this},filter:function(){},change_baseline:function(){},summarize_stats:function(){},updateData:function(){return!1},label:function(){},fill:function(){},hideLabel:function(){this.court.selectAll(".zone_label").attr("opacity",0)},showLabel:function(){this.court.selectAll(".zone_label").attr("opacity",1)},flipLabel:function(a,b,c){a.selectAll(b).each(function(){var a=d3.select(this),b=a.selectAll(c+"_label"),d=b[0][0].getBBox(),e=a.selectAll(c+"_label_sec"),f=e[0][0].getBBox();d.x+d.width/2,d.y+d.height/2,f.x+f.width/2,f.y+f.height/2,b.transition().duration(500).attr("transform","translate("+label_translate+",0)"),e.transition().duration(500).attr("transform","translate("+label2_translate+",0)")})},repositionLabels:function(a,b,c,d){d="undefined"==typeof d?500:d;var e=this;a.selectAll(b).each(function(){var a=d3.select(this),b=a.selectAll(c),f=b[0][0].getBBox();label=a.selectAll(c+"_label"),label_bbox=label[0][0].getBBox(),label2=a.selectAll(c+"_label_sec"),label2_bbox=label2[0][0].getBBox();var g=f.x+f.width/2-label_bbox.x-label_bbox.width/2,h=f.x+f.width/2-label2_bbox.x-label2_bbox.width/2,i=label_bbox.x+label_bbox.width/2,j=label_bbox.y+label_bbox.height/2,k=label2_bbox.x+label2_bbox.width/2,l=label2_bbox.y+label2_bbox.height/2,m="",n="";"defense"==e.courtobj.orientation&&(m="rotate(180 "+i+" "+j+")",n="rotate(180 "+k+" "+l+")"),label.transition().duration(d).attr("transform","translate("+g+",0) "+m),label2.transition().duration(d).attr("transform","translate("+h+",0) "+n)})}}});
